LDR_NO_READ:
	LDI ADC_DATA_L,LDR_NO
	RCALL ADC_INPUT_SELECT
	RCALL ADC_SIMPLE_CONVERSION
RET

LDR_SO_READ:
	LDI ADC_DATA_L,LDR_SO
	RCALL ADC_INPUT_SELECT
	RCALL ADC_SIMPLE_CONVERSION
RET

LDR_SE_READ:
	LDI ADC_DATA_L,LDR_SE
	RCALL ADC_INPUT_SELECT
	RCALL ADC_SIMPLE_CONVERSION
RET

LDR_NE_READ:
	LDI ADC_DATA_L,LDR_NE
	RCALL ADC_INPUT_SELECT
	RCALL ADC_SIMPLE_CONVERSION
RET

LDR_NO_LOAD:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	LDI ZL,LOW(LDR_NO_VEC)
	LDI ZH,HIGH(LDR_NO_VEC)
	STD Z+CONTADOR,ADC_DATA_H
RET

LDR_S0_LOAD:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	LDI ZL,LOW(LDR_SO_VEC)
	LDI ZH,HIGH(LDR_SO_VEC)
	STD Z+CONTADOR,ADC_DATA_H
RET

LDR_SE_LOAD:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	LDI ZL,LOW(LDR_SE_VEC)
	LDI ZH,HIGH(LDR_SE_VEC)	
	STD Z+CONTADOR,ADC_DATA_H
RET

LDR_NE_LOAD:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	MOV	ZL,R0
	MOV	ZH,R1	
	ST	Z+,ADC_DATA_H
	MOV	R0,ZL
	MOV	R1,ZH
RET

LDR_NO_RESET
RET
LDR_SO_RESET
RET
LDR_SE_RESET
RET
LDR_NE_RESET
RET

LDRS_INIT:
	LDI AUX,LOW(LDR_NO_VEC)
	MOV R0,AUX
	LDI AUX,HIGH(LDR_NO_VEC)
	MOV R1,AUX

	LDI AUX,LOW(LDR_SO_VEC)
	MOV R2,AUX
	LDI AUX,HIGH(LDR_SO_VEC)
	MOV R3,AUX

	LDI AUX,LOW(LDR_SE_VEC)
	MOV R4,AUX
	LDI AUX,HIGH(LDR_SE_VEC)
	MOV R5,AUX

	LDI AUX,LOW(LDR_NE_VEC)
	MOV R6,AUX
	LDI AUX,HIGH(LDR_NE_VEC)
	MOV R7,AUX
RET

ISR_ADC_CONVERSION_COMPLETE:
	
	RCALL LDR_NO_READ
	RCALL LDR_NO_LOAD

	RCALL LDR_SO_READ
	RCALL LDR_SO_LOAD

	RCALL LDR_SE_READ
	RCALL LDR_SE_LOAD

	RCALL LDR_NE_READ
	RCALL LDR_NE_LOAD

X4	_[LEER LDR
	 [SUBIR A RAM
DEC CONTADOR
BREQ HACER_PROMEDIO
SLEEP

HACER PROMEDIO:

