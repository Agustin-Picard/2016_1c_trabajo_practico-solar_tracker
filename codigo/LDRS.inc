
LDR_NO_STORE:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	
RET

LDR_S0_STORE:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	SLDR LDR_SO_LOW,LDR_SO_HIGH,ADC_DATA_H
RET

LDR_SE_STORE:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	SLDR LDR_SE_LOW,LDR_SE_HIGH,ADC_DATA_H
RET

LDR_NE_STORE:
;RECIBE: ADC_DATA_H EL VALOR DEL LDR
;DEVUELVE: -
	SLDR LDR_NE_LOW,LDR_NE_HIGH,ADC_DATA_H
RET

LDRS_INIT:
	LDI AUX,LOW(LDR_NO_VEC)
	MOV LDR_NO_LOW,AUX
	LDI AUX,HIGH(LDR_NO_VEC)
	MOV LDR_NO_HIGH,AUX

	LDI AUX,LOW(LDR_SO_VEC)
	MOV LDR_SO_LOW,AUX
	LDI AUX,HIGH(LDR_SO_VEC)
	MOV LDR_SO_HIGH,AUX

	LDI AUX,LOW(LDR_SE_VEC)
	MOV LDR_SE_LOW,AUX
	LDI AUX,HIGH(LDR_SE_VEC)
	MOV LDR_SE_HIGH,AUX

	LDI AUX,LOW(LDR_NE_VEC)
	MOV LDR_NE_LOW,AUX
	LDI AUX,HIGH(LDR_NE_VEC)
	MOV LDR_NE_HIGH,AUX
RET

READ_LDRS:

	INC CONTADOR 

	RLDR LDR_NO								;READ_LDR:	DEVUELVE EL RESULTADO DE LA CONVERSION EN ADC_DATA_H
	SLDR LDR_NO_LOW,LDR_NO_HIGH,ADC_DATA_H	;STORE_LDR:	UBICA [LDR_XX_LOW,LDR_XX_HIGH] EN UN PUNTERO Y GUARDA ADC_DATA_H

	RLDR LDR_SO								;READ_LDR:	DEVUELVE EL RESULTADO DE LA CONVERSION EN ADC_DATA_H
	SLDR LDR_SO_LOW,LDR_SO_HIGH,ADC_DATA_H	;STORE_LDR:	UBICA [LDR_XX_LOW,LDR_XX_HIGH] EN UN PUNTERO Y GUARDA ADC_DATA_H

	RLDR LDR_SE								;READ_LDR:	DEVUELVE EL RESULTADO DE LA CONVERSION EN ADC_DATA_H
	SLDR LDR_SE_LOW,LDR_SE_HIGH,ADC_DATA_H	;STORE_LDR:	UBICA [LDR_XX_LOW,LDR_XX_HIGH] EN UN PUNTERO Y GUARDA ADC_DATA_H

	RLDR LDR_NE								;READ_LDR:	DEVUELVE EL RESULTADO DE LA CONVERSION EN ADC_DATA_H
	SLDR LDR_NE_LOW,LDR_NE_HIGH,ADC_DATA_H	;STORE_LDR:	UBICA [LDR_XX_LOW,LDR_XX_HIGH] EN UN PUNTERO Y GUARDA ADC_DATA_H

	CPI CONTADOR,CANT_SAMPLES
	BREQ HACER_PROMEDIO
	CLC										;SI NO HIZO EL PROMEDIO: [CARRY=0].
	FIN_HACER_PROMEDIO:
RET

HACER_PROMEDIO:
	LDI	AUX,CANT_SAMPLES					;VECTMEAN NECESITA LA CANTIDAD DE LAS MUESTRAS

	LLDR Z,LDR_NO_LOW,LDR_NO_HIGH
	VECTMEAN Z,AUX,LDR_NO_MEAN

	LLDR Z,LDR_SO_LOW,LDR_SO_HIGH
	VECTMEAN Z,AUX,LDR_SO_MEAN

	LLDR Z,LDR_SE_LOW,LDR_SE_HIGH
	VECTMEAN Z,AUX,LDR_SE_MEAN

	LLDR Z,LDR_NE_LOW,LDR_NE_HIGH
	VECTMEAN Z,AUX,LDR_NE_MEAN

	RCALL LDRS_INIT							;RESETEO LOS PUNTEROS.

	SEC										;SI VINO A HACER EL PROMEDIO: [CARRY=1].
RJMP FIN_HACER_PROMEDIO

	