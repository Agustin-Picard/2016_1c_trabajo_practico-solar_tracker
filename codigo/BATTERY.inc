;-------------------------------------------------------------------------

							BATTERY.inc

;-------------------------------------------------------------------------

READ_BATTERY:
RET

CHECK_IF_BATTERY_MINIMUM:
	CLC
	CPI		ADC_DATA_H,MIN_BATTERY_VALUE	;COMPARAR PARA VER SI HAY SUFICIENTE BATERIA PARA OPERAR
	BRCS	_LOW_BATTERY					;[CARRY=1]: BATTERY LOW. [CARRY=0]: BATTERY OK

FIN_LOW_BATTERY:
RET

_LOW_BATTERY:
	RCALL LIGHT_TURN_OFF
	RCALL INDICATE_LOW_BATERRY
	RJMP FIN_LOW_BATTERY

INDICATE_LOW_BATERRY:
;PRENDER EL PIN DE BATERIA BAJA
;APAGAR EL PIN DE BATERIA OK
	SEC										;[CARRY=1]: BATTERY LOW. [CARRY=0]: BATTERY OK
RET
